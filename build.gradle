buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath "io.codearte.gradle.nexus:gradle-nexus-staging-plugin:0.5.3"
    }
}

apply plugin: 'io.codearte.nexus-staging'

allprojects {
    group = 'com.github.rahulsom'
}

subprojects {
    repositories {
        jcenter()
    }
}

task release() {
    description = 'Release artifacts to nexus'
    dependsOn 'uploadArchives', 'closeAndPromoteRepository'
    doLast {
        println "Released $version"
    }
}

project.afterEvaluate {
    project.tasks.findByName('closeAndPromoteRepository').mustRunAfter 'uploadArchives'
}